<!doctype html>
<html>
<head>
  <title>Cucumber Report</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

        function drawChart(chartData) {
            var data = google.visualization.arrayToDataTable([
                ['Task', 'Cucumber Results'],
                [ chartData.passed + ' passed', chartData.passed],
                [ chartData.failed + ' failed', chartData.failed],
                [ chartData.pending + ' pending', chartData.pending],
                [ chartData.notdefined + ' undefined', chartData.notdefined],
                [ chartData.ambiguous + 'ambiguous', chartData.ambiguous],
                [ chartData.skipped + ' skipped', chartData.skipped]
            ]);

            var total = chartData.passed + chartData.failed + (chartData.pending || 0) + (chartData.notdefined || 0) + (chartData.ambiguous || 0) + (chartData.skipped || 0);
            var title;

            if (total === 1) {
                title = total + ' ' + chartData.title.slice(0, -1)
            } else {
                title = total + ' ' + chartData.title;
            }

            var options = {
                width: '100%',
                height: 240,
                title: title,
                is3D: true,
                colors: ['#5cb85c', '#d9534f', '#999', '#5bc0de', '#428bca', '#f0ad4e'],
                fontSize: '13',
                fontName: '"Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',
                slices: {
                    1: {offset: 0.4},
                    2: {offset: 0.4},
                    3: {offset: 0.4},
                    4: {offset: 0.4},
                    5: {offset: 0.4},
                    6: {offset: 0.4}
                },
                titleTextStyle: {
                    fontSize: '13',
                    color: '#5e5e5e'
                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart_' + chartData.title.toLowerCase()));
            chart.draw(data, options);
        }
        google.load("visualization", "1", {packages: ["corechart"]});
        google.setOnLoadCallback(function() {drawChart({
                                                            "title" : "Features",
                                                            "failed" : {{summary.featuresFailed}},
                                                            "passed" : {{summary.featuresPassed}},
                                                            "notdefined" : 0,
                                                            "pending" : 0,
                                                            "skipped" : 0,
                                                            "ambiguous" : 0
                                                        })
                                            });
        google.setOnLoadCallback(function() {drawChart({
                                                            "title" : "Scenarios",
                                                            "failed" : {{summary.scenariosFailed}},
                                                            "passed" : {{summary.scenariosPassed}},
                                                            "notdefined" : 0,
                                                            "pending" : 0,
                                                            "skipped" : 0,
                                                            "ambiguous" : 0
                                                        })
                                            });
    </script>
    <script type="text/javascript">
      $(function(){

        const clipboard = new ClipboardJS('.fa-copy');
        clipboard.on('success', function(e) {
            alert('Value successfully copied to clipboard!');
        });
        clipboard.on('error', function(e) {
            alert('Can not copy value, error:' + e);
        });

        $('#featureSelector').change(function(){
          if ($(this).val() == 1) {
              $('#nav-failed-features').show();
              $('#nav-all-features').hide();
          }
          else {
              $('#nav-failed-features').hide();
              $('#nav-all-features').show();
          }
        });

        $('.list-group-item').on('click', function() {
          $('#selected-scenario').show();
          $('#summary').hide();
          const selectedId = $(this).attr('id').replace('scenario-link-', '');
          $('#selected-scenario').html($('#'+ selectedId).html());
          $('#info').show();
        });

        $('#summary-button').on('click', function() {
          $('#selected-scenario').hide();
          $('#summary').show();
          $('.selected-scenario').removeClass('selected-scenario');
        });

        $('#featureSelector').change();
        $('#all-features').hide();
        $('#info').hide();
        $('#summary').show();
        $('#selected-scenario').hide();

        $('.list-group-item').on('click', function() {
            var selected = $(this);
            $('.selected-scenario').removeClass('selected-scenario');
            selected.addClass('selected-scenario');
        })

      });
    </script>
    <style>
      span.tabCount {
        color: black;
        font-size: 12px;
      }

      table td {
        margin: 0;
        padding: 0;
      }

      .selected-scenario {
        background-color: rgba(0,0,0,.08);
      }
    </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-3" style="border: 1px black">
        {{> navigator }}
      </div>
      <div class="col-9" style="border: 1px black">
        {{> content }}
      </div>
    </div>
  </div>
</body>
